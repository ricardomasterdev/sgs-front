{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(python:*)",
      "Bash(./venv/Scripts/pip.exe install:*)",
      "Bash(./venv/Scripts/python.exe:*)",
      "Bash(ping:*)",
      "Bash(pip install:*)",
      "Bash(npm run build:*)",
      "Bash(npm install)",
      "Bash(C:sgs-backvenvScriptspython.exe -c \"from main import app; print\\(''Backend imports OK''\\)\")",
      "Bash(\"venv/Scripts/python.exe\" -c \"from main import app; print\\(''Backend imports OK''\\)\")",
      "Bash(tasklist:*)",
      "Bash(findstr:*)",
      "Bash(.venvScriptspython.exe -c \"from app.api.endpoints import admin; print\\([r.path for r in admin.router.routes]\\)\")",
      "Bash(venvScriptspython.exe -c \"from app.api.endpoints import admin; print\\([r.path for r in admin.router.routes]\\)\")",
      "Bash(C:/sgs-back/venv/Scripts/python.exe:*)",
      "Bash(curl:*)",
      "Bash(powershell:*)",
      "Bash(C:/sgs-back/venv/Scripts/pip.exe install:*)",
      "Bash(C:/gpvx-back/venv/Scripts/pip.exe show:*)",
      "Bash(C:/sgs-back/venv/Scripts/pip.exe show:*)",
      "Bash(C:/gpvx-back/venv/Scripts/python.exe --version)",
      "Bash(/c/sgs-back/venv/Scripts/python.exe:*)",
      "Bash(.venvScriptsactivate)",
      "Bash(cmd.exe /c \"cd /d C:\\\\sgs-back && .venv\\\\Scripts\\\\python.exe check_db.py\")",
      "Bash(cmd.exe /c \"cd /d C:\\\\sgs-back && .venv\\\\Scripts\\\\python.exe check_db.py 2>&1\")",
      "Bash(where:*)",
      "Bash(find:*)",
      "Bash(cat:*)",
      "Bash(.venvScriptspython.exe run_migration.py)",
      "Bash(Get-ChildItem -Path \"C:\\\\sgs-back\" -Recurse -Directory -Filter \"__pycache__\")",
      "Bash(Remove-Item -Recurse -Force)",
      "Bash(.venvScriptspython.exe -c \"\nimport asyncio\nimport asyncpg\n\nasync def run_migration\\(\\):\n    conn = await asyncpg.connect\\(\n        host=''177.136.244.5'',\n        port=5432,\n        user=''codex'',\n        password=''Ric@7901'',\n        database=''sgsx''\n    \\)\n    \n    # Criar tabela de cargos\n    await conn.execute\\(''''''\n        CREATE TABLE IF NOT EXISTS sgsx.cargos \\(\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid\\(\\),\n            salao_id UUID NOT NULL REFERENCES sgsx.saloes\\(id\\),\n            nome VARCHAR\\(100\\) NOT NULL,\n            descricao VARCHAR\\(255\\),\n            ordem INTEGER DEFAULT 0,\n            ativo BOOLEAN DEFAULT TRUE,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW\\(\\),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW\\(\\)\n        \\)\n    ''''''\\)\n    print\\(''Tabela cargos criada''\\)\n    \n    # Criar indice\n    await conn.execute\\(''''''\n        CREATE INDEX IF NOT EXISTS idx_cargos_salao_id ON sgsx.cargos\\(salao_id\\)\n    ''''''\\)\n    print\\(''Indice criado''\\)\n    \n    # Verificar se coluna cargo_id existe em colaboradores\n    result = await conn.fetchval\\(''''''\n        SELECT EXISTS \\(\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = ''sgsx'' AND table_name = ''colaboradores'' AND column_name = ''cargo_id''\n        \\)\n    ''''''\\)\n    \n    if not result:\n        await conn.execute\\(''''''\n            ALTER TABLE sgsx.colaboradores ADD COLUMN cargo_id UUID REFERENCES sgsx.cargos\\(id\\)\n        ''''''\\)\n        await conn.execute\\(''''''\n            CREATE INDEX IF NOT EXISTS idx_colaboradores_cargo_id ON sgsx.colaboradores\\(cargo_id\\)\n        ''''''\\)\n        print\\(''Coluna cargo_id adicionada em colaboradores''\\)\n    else:\n        print\\(''Coluna cargo_id ja existe''\\)\n    \n    # Verificar se coluna cargo antiga existe\n    result = await conn.fetchval\\(''''''\n        SELECT EXISTS \\(\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = ''sgsx'' AND table_name = ''colaboradores'' AND column_name = ''cargo''\n        \\)\n    ''''''\\)\n    \n    if result:\n        await conn.execute\\(''ALTER TABLE sgsx.colaboradores DROP COLUMN cargo''\\)\n        print\\(''Coluna cargo antiga removida''\\)\n    \n    # Inserir cargos padrao\n    saloes = await conn.fetch\\(''SELECT id FROM sgsx.saloes''\\)\n    for salao in saloes:\n        salao_id = salao[''id'']\n        cargos_padrao = [\n            \\(''Cabeleireira'', ''Profissional de cabelo'', 1\\),\n            \\(''Manicure'', ''Profissional de unhas'', 2\\),\n            \\(''Auxiliar de Atendimento'', ''Auxiliar de atendimento'', 3\\),\n            \\(''Recepcionista'', ''Recepcionista do salao'', 4\\),\n        ]\n        for nome, descricao, ordem in cargos_padrao:\n            exists = await conn.fetchval\\(''''''\n                SELECT EXISTS \\(SELECT 1 FROM sgsx.cargos WHERE salao_id = $1 AND nome = $2\\)\n            '''''', salao_id, nome\\)\n            if not exists:\n                await conn.execute\\(''''''\n                    INSERT INTO sgsx.cargos \\(salao_id, nome, descricao, ordem\\) VALUES \\($1, $2, $3, $4\\)\n                '''''', salao_id, nome, descricao, ordem\\)\n                print\\(f''Cargo {nome} inserido para salao {salao_id}''\\)\n    \n    await conn.close\\(\\)\n    print\\(''Migracao concluida com sucesso!''\\)\n\nasyncio.run\\(run_migration\\(\\)\\)\n\")",
      "Bash(C:sgs-backvenvScriptspython.exe -c \"\nimport asyncio\nimport asyncpg\n\nasync def run_migration\\(\\):\n    conn = await asyncpg.connect\\(\n        host=''177.136.244.5'',\n        port=5432,\n        user=''codex'',\n        password=''Ric@7901'',\n        database=''sgsx''\n    \\)\n    \n    # Criar tabela de cargos\n    await conn.execute\\(''''''\n        CREATE TABLE IF NOT EXISTS sgsx.cargos \\(\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid\\(\\),\n            salao_id UUID NOT NULL REFERENCES sgsx.saloes\\(id\\),\n            nome VARCHAR\\(100\\) NOT NULL,\n            descricao VARCHAR\\(255\\),\n            ordem INTEGER DEFAULT 0,\n            ativo BOOLEAN DEFAULT TRUE,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW\\(\\),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW\\(\\)\n        \\)\n    ''''''\\)\n    print\\(''Tabela cargos criada''\\)\n    \n    # Criar indice\n    await conn.execute\\(''''''\n        CREATE INDEX IF NOT EXISTS idx_cargos_salao_id ON sgsx.cargos\\(salao_id\\)\n    ''''''\\)\n    print\\(''Indice criado''\\)\n    \n    # Verificar se coluna cargo_id existe em colaboradores\n    result = await conn.fetchval\\(''''''\n        SELECT EXISTS \\(\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = ''sgsx'' AND table_name = ''colaboradores'' AND column_name = ''cargo_id''\n        \\)\n    ''''''\\)\n    \n    if not result:\n        await conn.execute\\(''''''\n            ALTER TABLE sgsx.colaboradores ADD COLUMN cargo_id UUID REFERENCES sgsx.cargos\\(id\\)\n        ''''''\\)\n        await conn.execute\\(''''''\n            CREATE INDEX IF NOT EXISTS idx_colaboradores_cargo_id ON sgsx.colaboradores\\(cargo_id\\)\n        ''''''\\)\n        print\\(''Coluna cargo_id adicionada em colaboradores''\\)\n    else:\n        print\\(''Coluna cargo_id ja existe''\\)\n    \n    # Verificar se coluna cargo antiga existe\n    result = await conn.fetchval\\(''''''\n        SELECT EXISTS \\(\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = ''sgsx'' AND table_name = ''colaboradores'' AND column_name = ''cargo''\n        \\)\n    ''''''\\)\n    \n    if result:\n        await conn.execute\\(''ALTER TABLE sgsx.colaboradores DROP COLUMN cargo''\\)\n        print\\(''Coluna cargo antiga removida''\\)\n    \n    # Inserir cargos padrao\n    saloes = await conn.fetch\\(''SELECT id FROM sgsx.saloes''\\)\n    for salao in saloes:\n        salao_id = salao[''id'']\n        cargos_padrao = [\n            \\(''Cabeleireira'', ''Profissional de cabelo'', 1\\),\n            \\(''Manicure'', ''Profissional de unhas'', 2\\),\n            \\(''Auxiliar de Atendimento'', ''Auxiliar de atendimento'', 3\\),\n            \\(''Recepcionista'', ''Recepcionista do salao'', 4\\),\n        ]\n        for nome, descricao, ordem in cargos_padrao:\n            exists = await conn.fetchval\\(''''''\n                SELECT EXISTS \\(SELECT 1 FROM sgsx.cargos WHERE salao_id = $1 AND nome = $2\\)\n            '''''', salao_id, nome\\)\n            if not exists:\n                await conn.execute\\(''''''\n                    INSERT INTO sgsx.cargos \\(salao_id, nome, descricao, ordem\\) VALUES \\($1, $2, $3, $4\\)\n                '''''', salao_id, nome, descricao, ordem\\)\n                print\\(f''Cargo {nome} inserido para salao {salao_id}''\\)\n    \n    await conn.close\\(\\)\n    print\\(''Migracao concluida com sucesso!''\\)\n\nasyncio.run\\(run_migration\\(\\)\\)\n\")",
      "Bash(.venvScriptspython.exe migrations/add_tipos_recebimento.py)",
      "Bash(\".venv\\\\Scripts\\\\python.exe\" migrations/add_tipos_recebimento.py)",
      "Bash(ls -la \"C:\\\\sgs-back\\\\alembic\\\\versions\"\" 2>/dev/null || dir \"C:sgs-backalembicversions\" 2>/dev/null || echo \"Folder not found \")",
      "Bash(venvScriptspython.exe -c \"\nimport asyncio\nimport asyncpg\n\nasync def run\\(\\):\n    conn = await asyncpg.connect\\(\n        host=''177.136.244.5'',\n        port=5432,\n        user=''codex'',\n        password=''Ric@7901'',\n        database=''sgsx''\n    \\)\n    \n    # Verificar se a coluna j√° existe\n    result = await conn.fetchval\\(''''''\n        SELECT EXISTS \\(\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = ''sgsx'' \n            AND table_name = ''produtos'' \n            AND column_name = ''foto_url''\n        \\)\n    ''''''\\)\n    \n    if result:\n        print\\(''Coluna foto_url ja existe na tabela produtos''\\)\n    else:\n        await conn.execute\\(''ALTER TABLE sgsx.produtos ADD COLUMN foto_url TEXT''\\)\n        print\\(''Coluna foto_url adicionada com sucesso!''\\)\n    \n    await conn.close\\(\\)\n\nasyncio.run\\(run\\(\\)\\)\n\")",
      "Bash(xargs:*)",
      "Bash(set:*)",
      "Bash(psql -h 177.136.244.5 -U codex -d sgsx -c \"SET search_path TO sgsx; ALTER TABLE sessoes_whatsapp ADD COLUMN IF NOT EXISTS session_id VARCHAR\\(100\\);\")",
      "Bash(/mnt/c/sgs-back/venv/Scripts/python.exe:*)",
      "Bash(Get-ChildItem C:GPVx-Whatsapp -Name)",
      "Bash(del C:sgs-backcriar_tabela_mensagens.py)",
      "Bash(npx tsc:*)",
      "Bash(grep:*)",
      "Bash(npm run dev:*)",
      "Bash(timeout:*)",
      "Bash(ls:*)",
      "Bash(copy \"C:\\\\sgs-front\\\\public\\\\favicon.svg\" \"C:\\\\sgs-front\\\\dist\\\\favicon.svg\")",
      "Bash(if not exist \"C:\\\\sgs-front\\\\public\" mkdir \"C:\\\\sgs-front\\\\public\")",
      "Bash(dir /s /b C:gabinete-backmain.py)",
      "Bash(dir /s /b C:gabinete-back*.py)",
      "Bash(dir /s /b C:Gpvx-Whatsappsrc*.ts)",
      "Bash(openssl version:*)",
      "Bash(node -e:*)",
      "Bash(mkcert:*)",
      "Bash(choco:*)",
      "Bash(./mkcert.exe:*)",
      "Bash(certutil -addstore:*)",
      "Bash(nslookup:*)",
      "Bash(certbot --version:*)",
      "Bash(unzip:*)",
      "Bash(./wacs.exe:*)",
      "Bash(.wacs.exe:*)",
      "Bash(iisreset:*)",
      "Bash(netsh http show servicestate:*)",
      "Bash(powershell -Command:*)",
      "Bash(net stop w3svc)",
      "Bash(pip show:*)",
      "Bash(certbot certonly:*)",
      "Bash(copy:*)",
      "Bash(powershell \"Get-ChildItem -Path ''C:\\\\sgs-front\\\\Arquivos_Bat'' -Name\")",
      "Bash(powershell \"Get-ChildItem -Path ''C:\\\\Users\\\\Administrator\\\\Desktop'' -Recurse -Include ''*.bat'' | Select-Object -ExpandProperty FullName\")",
      "Bash(xcopy \"C:\\\\gpvx-front\\\\dist\\\\*\" \"C:\\\\Web\\\\gpvx\"\" /E /Y /I)",
      "Bash(powershell \"Copy-Item -Path ''C:\\\\gpvx-front\\\\dist\\\\*'' -Destination ''C:\\\\Web\\\\gpvx\\\\'' -Recurse -Force\")",
      "Bash(powershell \"Select-String -Path ''C:\\\\Web\\\\gpvx\\\\assets\\\\*.js'' -Pattern ''api-gpvx.cdxsistemas'' | Select-Object -First 1\")",
      "Bash(powershell \"Get-NetTCPConnection -LocalPort 8000 -ErrorAction SilentlyContinue | Select-Object LocalPort,State,OwningProcess\")",
      "Bash(powershell \"Test-Path ''C:\\\\gpvx-back\\\\server.key'', ''C:\\\\gpvx-back\\\\server.crt''\")",
      "Bash(powershell \"Get-Process -Id 7228 | Select-Object ProcessName,Id\")",
      "Bash(powershell \"Stop-Process -Id 7228 -Force -ErrorAction SilentlyContinue; Write-Host ''Processo encerrado''\")",
      "Bash(powershell \"Test-Path ''C:\\\\gpvx-back\\\\server.key'',''C:\\\\gpvx-back\\\\server.crt''\")",
      "Bash(powershell \"Get-Process -Id 12960 | Select-Object ProcessName,CommandLine\")",
      "Bash(powershell \"Stop-Process -Id 12960 -Force; Write-Host ''Processo GPVx backend encerrado''\")",
      "Bash(powershell \"Stop-Process -Id 12960 -Force; Write-Host ''Processo encerrado''\")",
      "Bash(netstat:*)",
      "Bash(taskkill //F //PID 12960)",
      "Bash(taskkill //F //PID 10160)",
      "Bash(taskkill //F //PID 14116)",
      "Bash(taskkill:*)",
      "Bash(net stop:*)",
      "Bash(dir /b \"C:\\\\sgs-front\\\\src\\\\pages\")"
    ]
  }
}
